<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pricing Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400&family=Visby+CF:wght@700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        /* Brand palette (selected tones from attached brand swatches) */
                        primary: {
                            50: '#e6f6f8',
                            100: '#cfeff2',
                            200: '#9fdfe5',
                            300: '#5fbecf',
                            400: '#2fa6b8',
                            500: '#0066a1', /* mid-blue from palette */
                            600: '#04505c', /* deep teal/brand primary */
                            700: '#03474f',
                            800: '#02383f',
                            900: '#01292f',
                        },
                        secondary: {
                            50: '#e9f7f5',
                            100: '#d2f0ea',
                            200: '#a6e0d6',
                            300: '#74cfc2',
                            400: '#3eb8a8',
                            500: '#59c1b0', /* soft teal from palette */
                            600: '#009aa5', /* stronger teal */
                            700: '#007f86',
                            800: '#00666a',
                            900: '#044f4d',
                        },
                        accent: {
                            50: '#fff9e6',
                            100: '#fff2cc',
                            200: '#ffe699',
                            300: '#ffd966',
                            400: '#ffd033',
                            500: '#f3ce44', /* warm yellow from palette */
                            600: '#f3b72e',
                            700: '#e69e20',
                            800: '#b77418',
                            900: '#8b5510',
                        }
                    },
                    fontFamily: {
                        'sans': ['Visby CF', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                        'display': ['Mali', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                        'subheader': ['Visby CF', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', 'Arial', 'sans-serif'],
                    },
                    fontWeight: {
                        'normal': 400,
                        'medium': 500,
                        'semibold': 600,
                        'bold': 700,
                        'extrabold': 800,
                        'black': 900,
                    },
                    rotate: {
                        '180': '180deg',
                    }
                }
            }
        }
    </script>
    <!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
<link rel="manifest" href="favicon/site.webmanifest">
<link rel="shortcut icon" href="favicon/favicon.ico">
<meta name="msapplication-TileColor" content="#0066a1">
<meta name="theme-color" content="#ffffff">
</head>
<body>
    <div class="min-h-screen bg-gradient-to-br from-primary-50 via-white to-secondary-50">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <!-- Header -->
            <header class="mb-6">
                <div class="flex items-center gap-4 mb-2">
                    <img src="WorldSavvyLogo_CMYK_FullColorHorizontal.png" alt="World Savvy Logo" class="h-12 w-auto">
                    <div>
                        
                        <p class="text-slate-600 mt-1 font-sans font-bold">Program Offering Cost Estimation</p>
                    </div>
                </div>
            </header>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Left Panel - Program Selection & Summary -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- Instructions -->
                    <div class="bg-white rounded-lg shadow-sm border border-slate-200">
                        <button id="instructionsBtn" class="w-full px-6 py-4 text-left flex items-center justify-between hover:bg-slate-50 transition-colors">
                            <h2 class="text-lg font-subheader font-black text-slate-900">How to Use</h2>
                            <svg id="instructionsIcon" class="w-5 h-5 text-slate-500 transform transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>
                        <div id="instructionsContent" class="hidden px-6 pb-6">
                            <div class="space-y-4 text-sm text-slate-600">
                                <div>
                                    <h3 class="font-semibold text-slate-900 mb-2">1. Select a Program</h3>
                                    <p>Choose a program offering from the dropdown menu below. This will display all components for a <strong>standard base package delivery</strong> and their associated costs.</p>
                                    <p class="mt-2"><strong>Select the appropriate travel hours by zeroing out irrelevant travel fields.</strong> For example, for low travel, zero out the mid and high fields. For local/no travel partnerships, zero out all travel fields.</p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-slate-900 mb-2">2. Adjust Quantities</h3>
                                    <p>Modify the quantity for each program component as needed to <strong>scale programming</strong>. The cost will automatically update based on your selections.</p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-slate-900 mb-2">3. Add Travel Costs</h3>
                                    <p><strong>Calculate the travel costs for each program using the travel cost calculator.</strong> Enter additional costs for airfare, hotel, and transportation in the cost summary panel.</p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-slate-900 mb-2">4. Set Rates</h3>
                                    <p>Adjust the indirect rate and markup percentages to apply to your total costs. <strong>The markup range should not exceed 25%.</strong></p>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-slate-900 mb-2">5. Export Results</h3>
                                    <p>Click "Export Estimate" to download a detailed breakdown of your cost calculation.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Program Selector -->
                    <div class="bg-white rounded-lg shadow-sm border border-slate-200 p-6">
                        <h2 class="text-lg font-subheader font-black text-slate-900 mb-4">Program Selection</h2>
                        <select id="programSelector" class="w-full px-3 py-2 text-sm font-sans border border-slate-300 rounded-md focus:border-primary-500 focus:ring-1 focus:ring-primary-500">
                            <option value="">Select Program Offering</option>
                        </select>
                    </div>

                    <!-- Cost Summary -->
                    <div id="summaryPanel" class="bg-white rounded-lg shadow-sm border border-slate-200 p-6 hidden">
                        <h2 class="text-lg font-subheader font-black text-slate-900 mb-4">Cost Summary</h2>

                        <!-- Travel Calculator -->
                        <div class="space-y-4 mb-6 border-t pt-4">
                            <div class="flex items-start justify-between">
                                <h3 class="text-sm font-subheader font-black text-slate-900">Travel Calculator</h3>
                                <div class="ml-2">
                                    <button id="travelInstructionsToggle" class="text-sm text-slate-600 hover:text-slate-800 flex items-center gap-2">
                                        <svg id="travelInstructionsIcon" class="w-4 h-4 text-slate-500 transform transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                        </svg>
                                        <span class="underline">Instructions</span>
                                    </button>
                                </div>
                            </div>
                            <div id="travelInstructionsContent" class="hidden mt-2 text-xs text-slate-600">
                                <ol class="list-decimal pl-5">
                                    <li>Choose the trip origin and destination â€” airfare will fill automatically.</li>
                                    <li>Enter how many staff are travelling (staff count) and how many trips each will make.</li>
                                    <li>Set days of lodging (nights). If unsure, use the defaults shown (Per Diem $100, Ground $100).</li>
                                    <li>Click "Calculate Travel" and check the "Estimated Travel Total" on the right.</li>
                                    <li>If the total looks right, click "Apply to Additional Costs" to copy Airfare, Hotel and Transportation into the summary.</li>
                                    <li>Review the Summary on the left and adjust Indirect or Markup if needed before exporting.</li>
                                </ol>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1">From</label>
                                    <select id="travelFrom" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md"></select>
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1">To</label>
                                    <select id="travelTo" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md"></select>
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1">Airfare ($ per trip)</label>
                                    <input type="number" id="travelAirfare" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md" min="0" step="0.01" placeholder="0.00">
                                </div>
                                                                <div>
                                    <label class="block text-xs text-slate-600 mb-1"># of flights</label>
                                    <input type="number" id="numberOfAirfare" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md" min="0" step="1" placeholder="0">
                                </div>
                            </div>

                            <div class="grid grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1">Per Diem ($/day)</label>
                                    <input type="number" id="travelPerDiem" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md" min="0" step="0.01" value="100">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1">Trips per person</label>
                                    <input type="number" id="travelTrips" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md" min="1" step="1" value="1">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1">Nights lodging</label>
                                    <input type="number" id="travelDays" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md" min="0" step="1" value="1">
                                </div>
                            </div>

                            <div class="grid grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1 min-h-8">Staff needed</label>
                                    <input type="number" id="travelPLFs" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md" min="0" step="1" value="1">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1 min-h-8">Lodging per night ($)</label>
                                    <input type="number" id="travelLodgingPerNight" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md" min="0" step="0.01" value="275">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1 min-h-8">Ground transport per person/day ($)</label>
                                    <input type="number" id="travelGroundPerDay" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md" min="0" step="0.01" value="100">
                                </div>
                            </div>

                            <div class="grid grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1 min-h-8"># of miles driven for car travel</label>
                                    <input type="number" id="travelCarMiles" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md" min="0" step="0.01" value="0">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1 min-h-8">IRS Mileage Rate ($/mile)</label>
                                    <input type="number" id="travelCarRate" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md bg-slate-100 text-slate-500 cursor-not-allowed" min="0" step="0.001" value="0.70" disabled>
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1 min-h-8">Mileage Cost Total</label>
                                    <input type="number" id="travelCarTotal" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md bg-slate-100 text-slate-500 cursor-not-allowed" readonly value="0.00" disabled>
                                </div>
                            </div>
                                                        <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1 min-h-8"># of Additional Trips</label>
                                    <input type="number" id="numOfAdditionalTrips" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md" min="0" step="1" value="0">
                                </div>
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1 min-h-8">Avg. # of nights per Additional Trip</label>
                                    <input type="number" id="avgNumOfNightsPerAdditionalTrip" class="w-full h-12 px-3 py-2 text-sm border border-slate-300 rounded-md text-slate-500" min="0" step="1" value="0">
                                </div>
                            </div>

                            <div class="flex flex-col gap-3">
                                <div class="flex items-center gap-4 flex-col sm:flex-row w-full">
                                    <button id="calculateTravelBtn" class="bg-primary-600 hover:bg-primary-700 text-white px-4 rounded-md shadow text-sm h-12 font-medium whitespace-nowrap w-full md:w-auto">Calculate Travel</button>
                                    <button id="applyTravelBtn" class="bg-secondary-600 hover:bg-secondary-700 text-white px-4 rounded-md shadow text-sm h-12 font-semibold whitespace-nowrap w-full md:w-auto">Apply to Additional Costs</button>
                                </div>
                                <div class="mt-2 sm:mt-0">
                                    <button id="clearTravelBtn" class="bg-white border border-slate-300 text-slate-700 px-3 rounded-md text-sm h-10 whitespace-nowrap w-full md:w-auto">Clear Travel</button>
                                </div>
                                <div class="mt-2 md:mt-0 md:ml-auto text-right">
                                    <div class="text-sm text-slate-600">Airfare per trip</div>
                                    <div id="travelAirfarePerTrip" class="text-sm text-slate-900 mb-1">$0.00</div>
                                    <div class="text-sm text-slate-600">Estimated Travel Total</div>
                                    <div id="travelTotal" class="text-lg font-semibold text-primary-600">$0.00</div>
                                </div>
                            </div>

                            <div class="mt-3 grid grid-cols-1 gap-4 items-start">
                                <div>
                                    <label class="block text-xs text-slate-600 mb-1">Lodging region</label>
                                    <div class="flex items-center gap-3 bg-secondary-50 border border-secondary-200 rounded-md p-3">
                                        <input id="lodgingRegion" type="checkbox" class="h-5 w-5 accent-primary-600 ring-0" />
                                        <label for="lodgingRegion" class="text-sm text-slate-700 font-medium">Use NYC / SF lodging rates</label>
                                        <span class="ml-auto text-xs text-slate-500">Higher per-night rate</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Additional Costs (moved below subtotal) -->

                        <!-- Base Costs -->
                        <div class="space-y-3 mb-6">
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-600">Base Cost:</span>
                                <span class="font-medium" id="baseCost">$0.00</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-600">Indirect Cost:</span>
                                <span class="font-medium" id="indirectCost">$0.00</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-slate-600">Markup:</span>
                                <span class="font-medium" id="markupCost">$0.00</span>
                            </div>
                            <hr class="border-slate-200">
                            <div class="flex justify-between text-sm font-medium">
                                <span class="text-slate-700">Subtotal:</span>
                                <span id="subtotal">$0.00</span>
                            </div>
                        </div>

                        <!-- Additional Costs -->
                        <div class="space-y-3 mb-6">
                            <h3 class="text-sm font-subheader font-black text-slate-900">Additional Costs</h3>

                            <div class="text-sm text-slate-600 mt-1">Travel costs are calculated using the Travel Calculator above and applied to the summary when you click <strong>Apply to Additional Costs</strong>.</div>

                            <div class="flex justify-between text-sm mt-3">
                                <span class="text-slate-600">Travel Total:</span>
                                <span class="font-medium" id="travelSummary">$0.00</span>
                            </div>
                            <!-- Travel breakdown lines -->
                            <div class="mt-3 space-y-1 text-sm text-slate-600">
                                <div class="flex justify-between">
                                    <span>Airfare</span>
                                    <span id="airfareSummary" class="font-medium text-slate-900">$0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Hotel</span>
                                    <span id="hotelSummary" class="font-medium text-slate-900">$0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Transportation</span>
                                    <span id="transportSummary" class="font-medium text-slate-900">$0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Meals / Per Diem</span>
                                    <span id="mealsSummary" class="font-medium text-slate-900">$0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Car travel / Mileage</span>
                                    <span id="carMileageSummary" class="font-medium text-slate-900">$0.00</span>
                                </div>
                            </div>
                        </div>

                        <!-- Total -->
                        <div class="bg-slate-50 rounded-md p-4">
                            <div class="flex justify-between items-center">
                                <span class="text-lg font-subheader font-black text-slate-900">Total Estimate:</span>
                                <span class="text-2xl font-bold text-primary-600" id="totalAmount">$0.00</span>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="grid grid-cols-2 gap-3 mt-6">
                            <div>
                                <label class="block text-xs text-slate-600 mb-1">Indirect Rate (%)</label>
                                <input type="number" id="indirectRate" class="w-full px-3 py-2 text-sm border border-slate-300 rounded-md focus:border-primary-500 focus:ring-1 focus:ring-primary-500" min="0" max="100" step="0.1" value="20">
                            </div>
                            <div>
                                <label class="block text-xs text-slate-600 mb-1">Markup (%)</label>
                                <input type="number" id="markup" class="w-full px-3 py-2 text-sm border border-slate-300 rounded-md focus:border-primary-500 focus:ring-1 focus:ring-primary-500" min="0" max="100" step="0.1" value="0">
                            </div>
                        </div>

                        <button id="exportBtn" class="w-full mt-4 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-md transition-colors">Export Estimate</button>
                    </div>
                </div>

                <!-- Right Panel - Program Details -->
                <div class="lg:col-span-2">
                    <div id="selectedProgramContainer" class="hidden">
                        <div id="programsContainer"></div>
                    </div>

                    <!-- Empty State -->
                    <div id="emptyState" class="bg-white rounded-lg shadow-sm border border-slate-200 p-12 text-center">
                        <div class="text-slate-400 mb-4">
                            <svg class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                        </div>
                        <h3 class="text-lg font-subheader font-black text-slate-900 mb-2">Select a Program</h3>
                        <p class="text-slate-600">Choose a program offering from the dropdown to view components and pricing details.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="dist/bundle.js"></script>
</body>
</html>
